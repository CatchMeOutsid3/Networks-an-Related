#!/bin/bash

# Function to check if a program is installed
is_installed() {
    command -v "$1" >/dev/null 2>&1
}

# Function to install a package using apt
install_with_apt() {
    sudo apt-get update
    sudo apt-get install -y "$1"
}

# Function to install a package using yum
install_with_yum() {
    sudo yum install -y "$1"
}

# Function to install a package using dnf
install_with_dnf() {
    sudo dnf install -y "$1"
}

# Check if Nmap is installed
if ! is_installed "nmap"; then
    echo "Nmap is not installed. Installing..."
    # You can replace this with your package manager's install command for Nmap
    if is_installed "apt-get"; then
        install_with_apt "nmap"
    elif is_installed "yum"; then
        install_with_yum "nmap"
    elif is_installed "dnf"; then
        install_with_dnf "nmap"
    else
        echo "Unsupported package manager. Please install Nmap manually."
    fi
else
    echo "Nmap is already installed."
fi

# Check if Nikto is installed
if ! is_installed "nikto"; then
    echo "Nikto is not installed. Installing..."
    # You can replace this with your package manager's install command for Nikto
    if is_installed "apt-get"; then
        install_with_apt "nikto"
    elif is_installed "yum"; then
        install_with_yum "nikto"
    elif is_installed "dnf"; then
        install_with_dnf "nikto"
    else
        echo "Unsupported package manager. Please install Nikto manually."
    fi
else
    echo "Nikto is already installed."
fi

echo "Installation check complete."


echo "Enter IP: "
read IP

# Check if the input IP is empty
if [ -z "$IP" ]; then
    echo "IP address cannot be empty. Exiting."
    exit 1
fi

# Run Nmap
nmap -spoof-mac 94:38:70:3A:A2:F6 -sS -A "$IP"
echo "-------E--n--d----o-f--------N--m--a--p-----------"

echo "N..I..K..T..O..S..C..A..N"
# Run Nikto
nikto -h "$IP"

echo "Detailed Information: "
curl "ipinfo.io/$IP"

echo
echo

echo "Do you want to check for extra possible vulnerabilities? (Enter Y/N)"
read answer

if [[ "$answer" != "y" && "$answer" != "Y" && "$answer" != "yes" && "$answer" != "YES" ]]; then
    echo "No vulnerability check performed."
else
echo "And they are: "
    nmap --script=/usr/share/nmap/scripts/vulners.nse "$IP"
fi

